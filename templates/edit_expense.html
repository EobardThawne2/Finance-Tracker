{% extends "base.html" %}

{% block title %}Edit Expense - Finance Tracker{% endblock %}

{% block content %}
<div class="form-page">
    <div class="form-container">
        <div class="form-card">
            <div class="form-header">
                <h1>Edit expense</h1>
                <p>Update the details for this expense</p>
            </div>
            
            <form method="POST" class="expense-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="amount">Amount</label>
                        <input type="number" id="amount" name="amount" 
                               step="0.01" min="0.01" required
                               value="{{ expense.amount }}">
                    </div>
                    
                    <div class="form-group">
                        <label for="currency">Currency</label>
                        <select id="currency" name="currency">
                            {% for curr in currencies[:20] %}
                                <option value="{{ curr }}" {% if curr == expense.currency %}selected{% endif %}>
                                    {{ curr }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="category">Category</label>
                    <select id="category" name="category" required>
                        {% for cat in categories %}
                            <option value="{{ cat }}" {% if cat == expense.category %}selected{% endif %}>
                                {{ cat }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="date">Date</label>
                    <input type="date" id="date" name="date" 
                           value="{{ expense.date }}" required>
                </div>
                
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" name="description" rows="3">{{ expense.description or '' }}</textarea>
                </div>
                
                <div class="form-actions">
                    <a href="{{ url_for('dashboard') }}" class="btn btn-outline">Cancel</a>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
            </form>
            
            <div class="danger-zone">
                <h3>Danger zone</h3>
                <form action="{{ url_for('delete_expense_route', expense_id=expense.expense_id) }}" 
                      method="POST"
                      onsubmit="return confirm('Are you sure you want to delete this expense? This cannot be undone.')">
                    <button type="submit" class="btn btn-danger">Delete expense</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
